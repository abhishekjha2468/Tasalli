<!doctype html>
<html lang="en">

<head>
    <script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>
 <script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript"
  src="http://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Skill Test Page</title>
    <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">
    <style>
        .list-group-flush>.list-group-item {
            border-width: 0.01px;
        }
    </style>
</head>

<body>
    <!--Svg elements started -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
        <symbol id="bank" fill="currentColor" class="bi bi-bank" viewBox="0 0 16 16">
            <path
                d="m8 0 6.61 3h.89a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5H15v7a.5.5 0 0 1 .485.38l.5 2a.498.498 0 0 1-.485.62H.5a.498.498 0 0 1-.485-.62l.5-2A.501.501 0 0 1 1 13V6H.5a.5.5 0 0 1-.5-.5v-2A.5.5 0 0 1 .5 3h.89L8 0ZM3.777 3h8.447L8 1 3.777 3ZM2 6v7h1V6H2Zm2 0v7h2.5V6H4Zm3.5 0v7h1V6h-1Zm2 0v7H12V6H9.5ZM13 6v7h1V6h-1Zm2-1V4H1v1h14Zm-.39 9H1.39l-.25 1h13.72l-.25-1Z">
            </path>
        </symbol>

        <symbol id="bootstrap" viewBox="0 0 118 94">
            <title>Bootstrap</title>
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M24.509 0c-6.733 0-11.715 5.893-11.492 12.284.214 6.14-.064 14.092-2.066 20.577C8.943 39.365 5.547 43.485 0 44.014v5.972c5.547.529 8.943 4.649 10.951 11.153 2.002 6.485 2.28 14.437 2.066 20.577C12.794 88.106 17.776 94 24.51 94H93.5c6.733 0 11.714-5.893 11.491-12.284-.214-6.14.064-14.092 2.066-20.577 2.009-6.504 5.396-10.624 10.943-11.153v-5.972c-5.547-.529-8.934-4.649-10.943-11.153-2.002-6.484-2.28-14.437-2.066-20.577C105.214 5.894 100.233 0 93.5 0H24.508zM80 57.863C80 66.663 73.436 72 62.543 72H44a2 2 0 01-2-2V24a2 2 0 012-2h18.437c9.083 0 15.044 4.92 15.044 12.474 0 5.302-4.01 10.049-9.119 10.88v.277C75.317 46.394 80 51.21 80 57.863zM60.521 28.34H49.948v14.934h8.905c6.884 0 10.68-2.772 10.68-7.727 0-4.643-3.264-7.207-9.012-7.207zM49.948 49.2v16.458H60.91c7.167 0 10.964-2.876 10.964-8.281 0-5.406-3.903-8.178-11.425-8.178H49.948z">
            </path>
          </symbol>
    </svg>
    <!--Svg elements ended-->
    <!--Header/Navbar started-->
    <nav class="py-2 bg-light border-bottom">
        <div class="container d-flex flex-wrap" style="max-width: 100%;">
            <ul class="nav me-auto">
                <li class="nav-item"><a href="#" class="nav-link link-dark px-2 active" aria-current="page">Home</a>
                </li>
                <li class="nav-item"><a href="#" class="nav-link link-dark px-2">About</a></li>
            </ul>
            <ul class="nav">
                <li class="nav-item"><a href="#" class="nav-link link-dark px-2">Login</a></li>
                <li class="nav-item"><a href="#" class="nav-link link-dark px-2">Sign up</a></li>
            </ul>
        </div>
    </nav>
    <header class="border-bottom">
        <div class="container d-flex flex-wrap justify-content-center"
            style="max-width: 100%; padding-top: 0.5rem; padding-bottom: 0.5rem;">
            <a href="/" class="d-flex align-items-center mb-3 mb-lg-0 me-lg-auto text-dark text-decoration-none">
                <svg class="bi me-2" width="40" height="32">
                    <use xlink:href="#bank" />
                </svg>
                <span class="fs-4">Tasallii</span>
            </a>
        </div>
    </header>
    <!--Header/Navbar ended-->
    <!--Card started --> 
    <div class="card" style="margin-top: 5px; margin-left: 3em; margin-right:3em; margin-bottom: 5px;">
        <h5 class="card-header" style="text-align: center;">{{ skillname }} Assessments</h5>
        <div class="card-body" style="padding: 0px;">

            <!-- <ul class="list-group list-group-flush">
                <li class="list-group-item">1) What is an abstract class?</li>
                <li class="list-group-item">
                    <input class="form-check-input" type="radio" name="exampleRadios_1"
                        id="exampleRadios1" value="option1" unchecked style="margin-right: 5px;">An abstract class is
                    the name for any class from which you can instantiate an object.</li>
                <li class="list-group-item"><input class="form-check-input" type="radio" name="exampleRadios_1"
                        id="exampleRadios2" value="option2" unchecked style="margin-right: 5px;">An abstract class
                    exists only so that other “concrete” classes can inherit from the abstract class</li>
                <li class="list-group-item"><input class="form-check-input" type="radio" name="exampleRadios_1"
                        id="exampleRadios3" value="option3" unchecked style="margin-right: 5px;">Abstract classes must
                    be redefined any time an object is instantiated from them.</li>
                <li class="list-group-item"><input class="form-check-input" type="radio" name="exampleRadios_1"
                        id="exampleRadios4" value="option4" unchecked style="margin-right: 5px;">Abstract classes must
                    inherit from concrete classes.</li>

            </ul>
           
             <br >
            <ul class="list-group list-group-flush">
                <li class="list-group-item">2) What is an abstract class?</li>
                <li class="list-group-item"><input class="form-check-input" type="radio" name="exampleRadios_2"
                        id="exampleRadios2" value="option1" unchecked style="margin-right: 5px;">An abstract class is
                    the name for any class from which you can instantiate an object.</li>
                <li class="list-group-item"><input class="form-check-input" type="radio" name="exampleRadios_2"
                        id="exampleRadios2" value="option1" unchecked style="margin-right: 5px;">An abstract class
                    exists only so that other “concrete” classes can inherit from the abstract class</li>
                <li class="list-group-item"><input class="form-check-input" type="radio" name="exampleRadios_2"
                        id="exampleRadios2" value="option1" unchecked style="margin-right: 5px;">Abstract classes must
                    be redefined any time an object is instantiated from them.</li>
                <li class="list-group-item"><input class="form-check-input" type="radio" name="exampleRadios_2"
                        id="exampleRadios2" value="option1" unchecked style="margin-right: 5px;">Abstract classes must
                    inherit from concrete classes.</li>

            </ul>
            <br> 
            <ul class="list-group list-group-flush">
                <li class="list-group-item">3) What is an abstract class?</li>
                <li class="list-group-item"><input class="form-check-input" type="radio" name="exampleRadios"
                        id="exampleRadios1" value="option1" unchecked style="margin-right: 5px;">An abstract class is
                    the name for any class from which you can instantiate an object.</li>
                <li class="list-group-item"><input class="form-check-input" type="radio" name="exampleRadios"
                        id="exampleRadios1" value="option1" unchecked style="margin-right: 5px;">An abstract class
                    exists only so that other “concrete” classes can inherit from the abstract class</li>
                <li class="list-group-item"><input class="form-check-input" type="radio" name="exampleRadios"
                        id="exampleRadios1" value="option1" unchecked style="margin-right: 5px;">Abstract classes must
                    be redefined any time an object is instantiated from them.</li>
                <li class="list-group-item"><input class="form-check-input" type="radio" name="exampleRadios"
                        id="exampleRadios1" value="option1" unchecked style="margin-right: 5px;">Abstract classes must
                    inherit from concrete br classes.</li>

            </ul> -->
        </div>
        <div id="data-result">
            <div id="data-output">
                <div class="card-footer" style="text-align: center;"><button type="button" class="btn btn-primary"
                        onclick="testskill('{{skillname}}')">Let's Start</button></div>
            </div>
        </div>
    </div>
    <!--Card ended -->


   <!--footer started-->
   <footer class="d-flex flex-wrap justify-content-between align-items-center  border-top" style="padding-top: 0.5em; padding-bottom: 0.5em">
    <div class="col-md-4 d-flex align-items-center" style="padding-top: 0.1em; padding-left: 1.1em; padding-bottom: 0.1em;">
      <a href="/" class="mb-3 me-2 mb-md-0 text-muted text-decoration-none lh-1">
        <svg class="bi" width="30" height="24">
          <use xlink:href="#bootstrap" />
        </svg>
      </a>
      <span class="mb-3 mb-md-0 text-muted">&copy; 2022 Company, Inc</span>
    </div>
  </footer>
    <!--footer ended-->

    <!--java script started-->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>

    <script>
        function testskill(skill) {
            const request = new XMLHttpRequest();
            // console.log(`Function called`)
            let api = "https://tasalli.herokuapp.com/api/skilltest/"
            let skilltestApi = api.concat(skill)
            request.open("GET", skilltestApi);
            request.setRequestHeader('Access-Control-Allow-Origin', 'application/json');
            request.responseType = "json"
            request.send();
            // document.getElementById("data-output").innerHTML = `hello world`;
            request.onload = () => {
                if (request.status === 200) {
                    var res = request.response;
                    console.log(request.response);
                    // console.log(typeof request.response);
                    // console.log(typeof request.responseText);
                    // let placeholder = document.querySelector("#data-output");
                    var radiovalues = [];
                    for (var i = 0; i < res.length; i++) {
                        var l = [];
                        for (var j = 0; j < 4; j++) {
                            if (res[i]["CorrectAnswer"] == `${j}`) {
                                l.push(1);

                            }
                            else {
                                l.push(0);
                            }

                        }
                        console.log(`${res[i]["CorrectAnswer"]}`)
                        console.log(l)
                        radiovalues.push(l);
                    }

                    var out = "";

                    for (var i = 0; i < res.length; i++) {
                        console.log(`${i}`)
                        out += `
            <ul class="list-group list-group-flush">
                <li class="list-group-item">${i + 1} ) ${res[i]["Question"]}</li>
                <li class="list-group-item">
                    <input class="form-check-input" type="radio" name="exampleRadios_${i}"
                        value="${radiovalues[i][0]}" unchecked style="margin-right: 5px;">${res[i]["Options"][0]}</li>
                <li class="list-group-item"><input class="form-check-input" type="radio" name="exampleRadios_${i}"
                         value="${radiovalues[i][1]}" unchecked style="margin-right: 5px;">${res[i]["Options"][1]}</li>
                <li class="list-group-item"><input class="form-check-input" type="radio" name="exampleRadios_${i}"
                         value="${radiovalues[i][2]}" unchecked style="margin-right: 5px;">${res[i]["Options"][2]}</li>
                <li class="list-group-item"><input class="form-check-input" type="radio" name="exampleRadios_${i}"
                         value="${radiovalues[i][3]}" unchecked style="margin-right: 5px;">${res[i]["Options"][3]}</li>

            </ul>
            <br>
            `;
                    }
                    out += `</div>
        <div class="card-footer" style="text-align: center;"><button type="button"
                class="btn btn-primary" onclick='evaluatetest()'>Submit</button></div>
    </div>`


                    document.getElementById("data-output").innerHTML = out;
                    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});

                    if (skill=="Mathematics") {
                        MathJax.Hub.Queue(['Typeset', MathJax.Hub, 'data-output']);
                    }
                }
                else {
                    console.log(`error ${request.status}`)
                }
            }
        }

        function evaluatetest() {
            var l = [];
            for (var i = 0; i < 10; i++) {
                var ele = document.getElementsByName(`exampleRadios_${i}`);
                for (j = 0; j < ele.length; j++) {
                    if (ele[j].checked) {

                        if (ele[j].value == `0`) {
                            l.push(0);
                        }
                        else {
                            l.push(1);
                        }
                    }


                }

            }
            var out = ` <div style="text-align: center;">Your score is ${l.reduce((a, b) => a + b, 0)}/10</div>`
            document.getElementById("data-result").innerHTML = out;
<!--            event.preventDefault()-->

        }



    </script>

    <!--java script ended-->
</body>

</html>